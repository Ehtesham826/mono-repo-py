version: 2.1

orbs:
  path-filtering: circleci/path-filtering@0.0.2

setup: true

workflows:
  trigger-services:
    jobs:
    - path-filtering/filter:
        name: detect-auth-changes
        base-revision: main
        config-path: auth/.circleci/config.yml
        mapping: |
          auth/.*  true
        
    - path-filtering/filter:
        name: detect-payment-changes
        base-revision: main
        config-path: payment/.circleci/config.yml
        mapping: |
          payment/.*  true

    - path-filtering/filter:
        name: detect-search-changes
        base-revision: main
        config-path: search/.circleci/config.yml
        mapping: |
          search/.*  true
