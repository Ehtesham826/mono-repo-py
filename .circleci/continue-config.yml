version: 2.1

workflows:
  service-deployments:
    jobs:
      - auth_build_and_deploy:
          filters:
            branches:
              only: main
          when: << pipeline.parameters.auth_changes >>

      - payment_build_and_deploy:
          filters:
            branches:
              only: main
          when: << pipeline.parameters.payment_changes >>

      - search_build_and_deploy:
          filters:
            branches:
              only: main
          when: << pipeline.parameters.search_changes >>
